<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
 - @copyright Copyright (C) 2014-2015 City of Bloomington, Indiana. All rights reserved.
 - @license http://www.gnu.org/copyleft/gpl.html GNU/GPL, see LICENSE.txt
 - @author W. Sibo <sibow@bloomington.in.gov>
 -
 -->
<html xmlns="http://www.w3.org/1999/xhtml">

  <head>
    <title>Incident Reporting</title>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>
		<link href = "css/styles.css" rel = "stylesheet"/>
  </head>
  <body>
		<h2>View Incident</h2>
		<span th:if="${errors}" th:text="${errors}"></span>
		<p>Incident details, if you notice any incident items need to be changed
			click on <a th:href="@{/incident/edit/{id}(id=${incident.id})}">Edit</a>
			link and do your changes.
		</p>
		<div th:if="${incident.canBeSubmitted()}">
			<ul>
				<li>The incident is ready to be submitted.</li>
				<li>If submitted no more changes can be done</li>
				<li>Review your request again to make sure everything is correct</li>
				<li>If no further changes are needed click on the 'Submit' button below</li>
			</ul>
		</div>
		<fieldset>
				<legend>Incident General Info</legend>
				<table summary="layout for form fields" width="90%">
					<tr>
						<th><label> Incident Type:</label></th>
						<td>
							<span th:text="${incident.incidentType}"> </span>
						</td>
					</tr>
					<tr>
						<th><label> Reporter Email</label></th>
						<td>
							<span th:text="${incident.email}"> </span>
						</td>
					</tr>
					<tr>
						<th><label> Report Date & Time </label></th>
						<td>
							<span th:text="${incident.receivedStr}"> </span>
						</td>
					</tr>
					<tr>
						<th>
							<label>Incident Date & time </label>
						</th>
						<td>
							<span th:text="${incident.dateTimeInfo}"> </span> 
						</td>
					</tr>
					<tr>
						<th>
							<label>Incident address:</label>
						</th>
						<td>
							<span th:text="${incident.addressInfo}"> </span>
						</td>
					</tr>
					<tr>
						<th>
							<label>Entry access:</label>
						</th>
						<td>
							<span th:text="${incident.entryInfo}" ></span>
						</td>
					</tr>
					<tr>
						<th>
							<label>Incident Details</label>
						</th>
						<td>
							<span th:text="${incident.details}" ></span>								
						</td>
					</tr>
				</table>
				<table>
					<tr>
						<td th:if="${incident.hasPersonList()}">
							<input type="button"
										 th:attr="onclick=|window.location.href='/person/add/${incident.id}'|"
										 value="Add Another Person" />
							<!--
							<a th:href="@{/person/add/{id}(id=${incident.id})}">Add Another Person </a>
							-->
						</td>
						<td th:unless="${incident.hasPersonList()}">
							<input type="button"
										 th:attr="onclick=|window.location.href='/person/add/${incident.id}'|"
										 value="Add person" /> 
						</td>
						<td th:if="${incident.hasPropertyList()}">
							<input type="button"
										 th:attr="onclick=|window.location.href='/property/add/${incident.id}'|"
										 value="Add another property" /> 							
						</td>
						<td th:unless="${incident.hasPropertyList()}">
							<input type="button"
										 th:attr="onclick=|window.location.href='/property/add/${incident.id}'|"
										 value="Add property" /> 	
							
						</td>
						<td th:if="${incident.hasVehicleList()}">
							<input type="button"
										 th:attr="onclick=|window.location.href='/vehicle/add/${incident.id}'|"
										 value="Add another vehicle" /> 	
							
						</td>
						<td th:unless="${incident.hasVehicleList()}">					
							<input type="button"
										 th:attr="onclick=|window.location.href='/vehicle/add/${incident.id}'|"
										 value="Add vehicle" /> 	
						</td>
						<td th:if="${incident.hasMediaList()}">
							<input type="button"
										 th:attr="onclick=|window.location.href='/media/add/${incident.id}'|"
										 value="Upload anther image" /> 								
						</td>
						<td th:unless="${incident.hasMediaList()}">
							<input type="button"							
										 th:attr="onclick=|window.location.href='/media/add/${incident.id}'|"
										 value="Upload image" /> 	
						</td>						
					</tr>
					<tr th:if="${incident.canBeSubmitted()}">
						<td colspan="2">Your incident is ready to be submitted </td>
						<td>
							<input type="button"							
										 th:attr="onclick=|window.location.href='/incident/submit/${incident.id}'|"
										 value="Submit the incident" /> 								
						</td>
					</tr>					
				</table>
			</fieldset>
			<div th:if="${incident.hasPersonList()}">
				<div th:insert="personsShort::persons(${incident.persons})"></div>
			</div>
			<div th:if="${incident.hasPropertyList()}">
				<div th:insert="propertiesShort::properties(${incident.properties},${incident.propertiesTotalValueFr})"></div>
			</div>
			<div th:if="${incident.hasVehicleList()}">
				<div th:insert="vehiclesShort::vehicles(${incident.vehicles})"></div>
			</div>
			<div th:if="${incident.hasMediaList()}">
				<div th:insert="medias::medias(${incident.medias})"></div>
			</div>			
	</body>
</html>
