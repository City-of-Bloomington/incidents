<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
 - @copyright Copyright (C) 2014-2015 City of Bloomington, Indiana. All rights reserved.
 - @license http://www.gnu.org/copyleft/gpl.html GNU/GPL, see LICENSE.txt
 - @author W. Sibo <sibow@bloomington.in.gov>
 -
 -->
<html xmlns="http://www.w3.org/1999/xhtml">

<head th:replace="general::head('Incident Details')"></head>

<body>
	<header th:replace="general::header"></header>

	

	<main class="public-questions-wrapper">
		<h2>View Incident</h2>

		<div th:if="${errors}">
			<div th:replace="general::errors(${errors})"></div>
		</div>
		
		<div th:if="${messages}">
			<div th:replace="general::messages(${messages})"></div>
		</div>
		
		<p>Incident details, if you notice any incident information need to be changed click on <a th:href="@{/incident/edit/{id}(id=${incident.id})}">Edit</a> link and do your changes.</p>

		<ul class="button-group">
			<li th:if="${incident.hasPersonList()}">
				<input type="button" th:attr="onclick=|window.location.href='${hostPath}/person/add/${incident.id}'|"
					value="Add Another Person" />
			</li>
		
			<li th:unless="${incident.hasPersonList()}">
				<input type="button" th:attr="onclick=|window.location.href='${hostPath}/person/add/${incident.id}'|"
					value="Add person" />
			</li>
		
			<li th:if="${incident.hasPropertyList()}">
				<input type="button" th:attr="onclick=|window.location.href='${hostPath}/property/add/${incident.id}'|"
					value="Add another property" />
			</li>
		
			<li th:unless="${incident.hasPropertyList()}">
				<input type="button" th:attr="onclick=|window.location.href='${hostPath}/property/add/${incident.id}'|"
					value="Add property" />
			</li>
		
			<li th:if="${incident.hasVehicleList()}">
				<input type="button" th:attr="onclick=|window.location.href='${hostPath}/vehicle/add/${incident.id}'|"
					value="Add another vehicle" />
			</li>
		
			<li th:unless="${incident.hasVehicleList()}">
				<input type="button" th:attr="onclick=|window.location.href='${hostPath}/vehicle/add/${incident.id}'|"
					value="Add vehicle" />
			</li>
		
			<li th:if="${incident.hasMediaList()}">
				<input type="button" th:attr="onclick=|window.location.href='${hostPath}/media/add/${incident.id}'|"
					value="Upload anther image" />
			</li>
		
			<li th:unless="${incident.hasMediaList()}">
				<input type="button" th:attr="onclick=|window.location.href='${hostPath}/media/add/${incident.id}'|"
					value="Upload image" />
			</li>
		</ul>

		<div th:if="${incident.canBeSubmitted()}">
			<p>Now you can add other persons, property(ies), vehicle(s) and incident images by clicking the corresponding button below.</p>
		</div>

		<div th:if="${incident.canBeSubmitted()}">
			<ul>
				<li>The incident is ready to be submitted.</li>
				<li>If submitted no more changes can be made</li>
				<li>Review your request again to make sure everything is correct</li>
				<li>If no further changes are needed click on the 'Final Submit Page' button</li>
			</ul>
		</div>

		<h2>Incident General Info</h2>
		<div th:replace="incidentView::incident(${incident})"></div>

		<div th:if="${incident.hasPersonList()}">
			<div th:insert="personsShort::persons(${incident.persons})"></div>
		</div>
		
		<div th:if="${incident.hasPropertyList()}">
			<div th:insert="propertiesShort::properties(${incident.properties},${incident.totalValueFr})"></div>
		</div>
		
		<div th:if="${incident.hasVehicleList()}">
			<div th:insert="vehiclesShort::vehicles(${incident.vehicles})"></div>
		</div>
		
		<div th:if="${incident.hasMediaList()}">
			<div th:insert="medias::medias(${incident.medias})"></div>
		</div>

		<div class="next_div" th:if="${incident.canBeSubmitted()}">
			<input type="button" th:attr="onclick=|window.location.href='${hostPath}/incident/finalPage/${incident.id}'|"
				value="Final Submit Page" />
		</div>
	</main>
</body>
</html>