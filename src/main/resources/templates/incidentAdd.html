<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
 - @copyright Copyright (C) 2014-2015 City of Bloomington, Indiana. All rights reserved.
 - @license http://www.gnu.org/copyleft/gpl.html GNU/GPL, see LICENSE.txt
 - @author W. Sibo <sibow@bloomington.in.gov>
 -
 -->
<html xmlns="http://www.w3.org/1999/xhtml">
  <head th:insert="general::head('Incident')"></head>
  <body>
		<header th:insert="general::header">
		</header>
		<h2>Add Incident Details</h2>
		<span th:if="${errors}" th:text="${errors}"></span>
		<p th:insert="general::incidentInstructions">
		</p>
		<p> *indicated required fields</p>		
		<p>Incident Type <span th:text="${incident.incidentType}"> </span> </p>
		<form action="#"
					th:action="@{/incidentNext/{id}(id=${incident.id})}"
					th:object="${incident}"
					method="post">
			<input type="hidden" th:field="${incident.email}" />
			<input type="hidden" th:field="${incident.receivedStr}" />
			<input type="hidden" th:field="${incident.incidentType} "/>
			<fieldset>
				<legend>Incident Date and Time</legend>
				<table summary="layout for form fields" width="90%">
					<tr>
						<td width="23%">
							<label for="start_date" class="required">Date & Time Incident Occurred:</label>
						</td>
						<td>
							<input type="text" th:field="${incident.dateStr}" id="start_date" size="20" />
						</td>
						<td>
							(For EXAMPLE: I went to bed at 11:00 pm Saturday night Aug 8 <br />
							and when I woke up Sunday at 6:00 am mycar has a smashed window.<br />
							You report 8/8/2015 23:00 - 8/9/2015 06:00.)						
						</td>
					</tr>
					<tr>
						<td><label for="end_date">End Incident Date & Time:</label>
						</td>
						<td>
							<input type="text" th:field="${incident.endDateStr}" id="end_date" value="" size="20" />
						</td>
					</tr>
					<tr>
						<td colspan="3">
							If unsure of the exact date and time, describe below when this took place.
						</td>
					</tr>
					<tr>
						<td colspan='3'>
							<textarea th:field="${incident.dateDescription}" id="incident-dateDescription" rows="3" cols="60"></textarea>
						</td>
					</tr>
				</table>
			</fieldset>
			<fieldset><legend>Location of Incident</legend>
				<img th:src="@{/images/citylimits.jpg}" alt="city limits" width="900"/>
				<table summary="layout for form fields" width="90%">
					<tr>
						<td colspan="2">
							<ul>
								<li>
									If unsure of location, please report your home address or closest intersection of the incident and explain in the Incident Details.
								</li>
								<li>
									If you are in the blue area, you can make a report using this system.
								</li>
								<li>
									If you are within the green area, you can not file a report using this system, contact Indiana University Police Department.
								</li>
								<li>
									If you are within the white area, contact Monroe County Sheriff's Office.
								</li>		
							</td>
						</tr>
					<tr>
						<td width="28%">
							<label for="addr_id" class="required">Address where the incident occured</label>
						</td>
						<td><input type="text" th:field="${incident.address}" onchange="replaceMarker()" id="addr_id" value="" size="60" />
						</td>
					</tr>
					<tr>
						<td>
							<label for="city" class="required">City</label>
						</td>
						<td>
							<select th:field="${incident.city}" id="city">
								<option value="">City</option>
								<option th:each="r : ${allCities}"
											th:value="${r}"
											th:text="${r}">
								</option>											
							</select>
						</td>
					</tr>
					<tr>
						<td>
							<label for="state" class="required">State</label>
						</td>
						<td>
							<select th:field="${incident.state}" id="state">
								<option value="">State</option>
								<option th:each="r : ${allStates}"
											th:value="${r}"
											th:text="${r}">
								</option>											
							</select>
						</td>
					</tr>
					<tr>
						<td>
							<label for="incident-zip" class="required">Zip Code</label>
						</td>
						<td>
							<select th:field="${incident.zip}" id="zip">
								<option value="">Zip</option>
								<option th:each="r : ${allZipCodes}"
											th:value="${r}"
											th:text="${r}">
								</option>								
							</select>
						</td>
					</tr>
					</table>
				</fieldset>
				<fieldset>
					<legend>Incident Details</legend>
					<table width="90%" summary="Incident details layout">
						<tr>
							<td width="28%"><label>Incident Type:</label></td>
							<td><span th:text="${incident.incidentType}" ></span></td>
						</tr>
						<tr>
							<td>
								<label for="entry_type">Identify how entry was gained to commit the theft.</label>
							</td>
							<td>
								<select th:field="${incident.entryType}" id="entry_type">
									<option value="">Does not apply</option>
									<option th:each="r : ${entryTypes}"
													th:value="${r}"
													th:text="${r}">
									</option>	
								</select>					
							</td>
						</tr>
						<tr>
							<td colspan="2">
								<label for="other_entry">Other entry gained details</label>
							</td>
						</tr>
						<tr>
							<td colspan="2">
								<textarea th:field="${incident.otherEntry}" id="other_entry" rows="3" cols="60"></textarea>
							</td>
						</tr>
						<tr>
							<td colspan="2">
								<label for="incident-details" class="required">Incident Details</label>
							</td>
						</tr>
						<tr>
							<td colspan="2">
								<textarea th:field="${incident.details}" id="incident-details" rows="3" cols="60"></textarea>
							</td>
						</tr>
						<tr>
							<td colspan="2">Optional, if you have incident images available you need to mark the checkbox below, then when you click on 'Next' you have the chance to upload them.</td>
						</tr>
						<tr>
							<td colspan="2"><input type="checkbox" th:field="${incident.haveMedia}" th:checked="${incident.haveMedia}?'checked'" value="y"  />Yes, I have incident images I would like to upload.</td>
						</tr>
					</table>
				</fieldset>				
				<table>
					<tr>
						<td> All required fields must be filled in to move on to next page 
							<input type="submit" value="Next" />
						</td>
					</tr>
				</table>
		</form>
	</body>
</html>
