<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
 - @copyright Copyright (C) 2014-2015 City of Bloomington, Indiana. All rights reserved.
 - @license http://www.gnu.org/copyleft/gpl.html GNU/GPL, see LICENSE.txt
 - @author W. Sibo <sibow@bloomington.in.gov>
 -
 -->
<html xmlns="http://www.w3.org/1999/xhtml">
  <head th:replace="general::head('Incident')"></head>
  <body>
    <header th:replace="general::header">
    </header>
    <h2>Add Incident Details</h2>
    <div th:if="${errors}">
      <div th:replace="general::errors(${errors})"></div>			
    </div>
    <div th:if="${messages}">
      <div th:replace="general::messages(${messages})"></div>			
    </div>					
    <p th:insert="general::incidentInstructions">
    </p>
    <p> *indicated required fields</p>		
    <p>Incident Type <span th:text="${incident.incidentType}"> </span> </p>
    <form action="#"
	  th:action="@{/incidentNext/{id}(id=${incident.id})}"
	  th:object="${incident}"
	  onsubmit="return verifyIncidentInput()"
	  method="post">
      <input type="hidden" th:field="${incident.email}" />
      <input type="hidden" th:field="${incident.receivedStr}" />
      <input type="hidden" th:field="${incident.incidentType} "/>
      <fieldset>
	<legend>Incident Date and Time</legend>
	<dl>
	  <dd>
	      (For EXAMPLE: I went to bed at 11:00 PM Saturday night Aug 8 <br />
	      and when I woke up Sunday at 6:00 AM my car has a smashed window.<br />
	      You report 8/8/2015 21:00 PM - 8/9/2015 06:00 AM.)						
	  </dd>
	  <dt>
	    <label for="start_date" class="required">*Incident Occurred, Date:</label>
	  </dt>
	  <dd>
	    <input type="date" th:field="${incident.dateStr}" id="start_date" size="15" placeholder="mm/dd/yyyy" /> Time:
	    <input type="text" th:field="${incident.timeStr}" id="start_time" size="15" class="timepicker" placeholder="hh:mm am/pm" />(for example 10:30 PM)
	  </dd>
	  <dt><label for="end_date">End Incident, Date:</label>
	  </dt>
	  <dd>
	    <input type="date" th:field="${incident.endDateStr}" id="end_date" value="" size="15" placeholder="mm/dd/yyyy" /> Time:
	    <input type="text" th:field="${incident.endTimeStr}" id="end_time" value="" size="15" class="timepicker" placeholder="hh:mm am/pm" /> (for example 11:30 PM)
	  </dd>
	  <dd>
	   Or, if unsure of the exact date and time, describe below when this took place.
	  </dd>
	  <dd>
	    <textarea th:field="${incident.dateDescription}" id="date_description" rows="3" cols="60"></textarea>
	  </dd>
	</dl>
      </fieldset>
      <fieldset><legend>Location of Incident</legend>
	<img th:src="@{/images/citylimits.jpg}" alt="city limits" width="900"/>
	<ul>
	  <li>
	    If unsure of location, please report your home address or closest intersection of the incident and explain in the Incident Details.
	  </li>
	  <li>
	    If you are in the blue area, you can make a report using this system.
	  </li>
	  <li>
	    If you are within the green area, you can not file a report using this system, contact Indiana University Police Department.
	  </li>
	  <li>
	    If you are within the white area, contact Monroe County Sheriff's Office.
	  </li>
	</ul>
	<dl>
	  <dt>
	    <label for="addr_id" class="required">*Address where the incident occured</label>
	  </dt>
	  <dd>
	      <input type="text" th:field="${incident.address}" onchange="replaceMarker()" id="addr_id" value="" size="60" placeholder="Address" required="required" />
	  </dd>
	  <dt>
	    <label for="city_id" class="required">*City</label>
	  </dt>
	  <dd>
	    <select th:field="${incident.city}" id="city_id">
	      <option value="">City</option>
	      <option th:each="r : ${allCities}"
		      th:value="${r}"
		      th:text="${r}">
	      </option>											
	    </select>
	  </dd>
	  <dt>
	    <label for="state_id" class="required">*State</label>
	  </dt>
	  <dd>
	    <select th:field="${incident.state}" id="state_id" required="required">
	      <option value="">State</option>
	      <option th:each="r : ${allStates}"
		      th:value="${r}"
		      th:text="${r}">
	      </option>
	    </select>
	  </dd>
	  <dt>
	    <label for="zip_id" class="required">*Zip Code</label>
	  </dt>
	  <dd>
	    <select th:field="${incident.zip}" id="zip_id" required="required">
	      <option value="">Zip</option>
	      <option th:each="r : ${allZipCodes}"
		      th:value="${r}"
		      th:text="${r}">
	      </option>								
	    </select>
	  </dd>
	</dl>
      </fieldset>
      <fieldset>
	<legend>Incident Details</legend>
	<dl>
	  <dt><label>Incident Type:</label></dt>
	  <dd><span th:text="${incident.incidentType}" ></span></dd>
	  <dt>
	    <label for="entry_type">Identify how entry was gained to commit the act.</label>
	  </dt>
	  <dd>
	    <select th:field="${incident.entryType}" id="entry_type">
	      <option value="">Does not apply</option>
	      <option th:each="r : ${entryTypes}"
		      th:value="${r}"
		      th:text="${r}">
	      </option>	
	    </select>					
	  </dd>
	  <dt>
	    <label for="other_entry">Other entry gained details</label>
	  </dt>
	  <dd>
	    <textarea th:field="${incident.otherEntry}" id="other_entry" rows="3" cols="60" placeholder="Other entry details"></textarea>
	  </dd>
	  <dt>
	    <label for="details_id" class="required">*Incident Details</label>
	  </dt>
	  <dd>
	    <textarea th:field="${incident.details}" id="details_id" rows="3" cols="60" required="reguired" placeholder="Incident Details"></textarea>
	  </dd>
	  <dd>Optional, if you have incident images available you need to mark the checkbox below, then when you click on 'Next' you have the chance to upload them.</dd>
	  <dd colspan="2"><input type="checkbox" th:field="${incident.haveMedia}" th:checked="${incident.haveMedia}?'checked'" value="y"  />Yes, I have incident images I would like to upload.</dd>
	</dl>
      </fieldset>
      <dl>
	<dd> All required fields must be filled in to move on to next page 
	  <input type="submit" value="Next" />
	</dd>
      </dl>
    </form>
  </body>
</html>
